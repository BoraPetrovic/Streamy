{"version":3,"sources":["apis/streams.js","history.js","actions/types.js","actions/index.js","components/GoogleAuth.js","components/Header.js","components/streams/StreamForm.js","components/streams/StreamCreate.js","components/Modal.js","components/streams/StreamDelete.js","components/streams/StreamEdit.js","components/streams/StreamList.js","components/streams/StreamShow.js","components/App.js","reducers/authReducer.js","reducers/index.js","reducers/streamReducer.js","index.js"],"names":["axios","create","baseURL","createHashHistory","SIGN_IN","SIGN_OUT","CREATE_STREAM","FETCH_STREAMS","FETCH_STREAM","DELETE_STREAM","EDIT_STREAM","fetchStream","id","dispatch","a","streams","get","response","type","payload","data","GoogleAuth","onAuthChange","isSignedIn","props","signIn","auth","currentUser","getId","signOut","onSignInClick","onSignOutClick","window","gapi","load","client","init","clientId","scope","then","auth2","getAuthInstance","listen","this","onClick","className","renderAuthButton","React","Component","connect","state","userId","Header","to","StreamForm","renderInput","input","label","meta","error","touched","autoComplete","renderError","onSubmit","formValues","handleSubmit","Field","name","component","reduxForm","form","validate","errors","title","description","StreamCreate","createStream","fomValues","getState","post","push","Modal","ReactDOM","createPortal","onDismiss","e","stopPropagation","content","actions","document","querySelector","StreamDelete","match","params","Fragment","deleteStream","stream","renderContent","renderActions","ownProps","delete","StreamEdit","editStream","initialValues","_","pick","patch","StreamList","fetchStreams","currentUserId","map","renderAdmin","style","textAlign","renderList","renderCreate","Object","values","StreamShow","videoRef","createRef","buildPlayer","player","destroy","flv","createPlayer","url","attachMediaElement","current","ref","width","controls","App","history","path","exact","INITIAL_STATE","combineReducers","action","formReducer","mapKeys","omit","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk","render"],"mappings":"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","file":"static/js/main.7b0a657f.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nexport default axios.create({\r\n    baseURL: \"http://localhost:3001\"\r\n});","import { createHashHistory } from 'history';\r\n\r\nexport default createHashHistory();","export const SIGN_IN = 'SIGN_IN';\r\nexport const SIGN_OUT = 'SIGN_OUT';\r\nexport const CREATE_STREAM = 'CREATE_STREAM';\r\nexport const FETCH_STREAMS = 'FETCH_STREAMS';\r\nexport const FETCH_STREAM = 'FETCH_STREAM';\r\nexport const DELETE_STREAM = 'DELETE_STREAM';\r\nexport const EDIT_STREAM = 'EDIT_STREAM';\r\n\r\n","import streams from '../apis/streams';\r\nimport createHashHistory from '../history';\r\nimport {\r\n    SIGN_IN,\r\n    SIGN_OUT,\r\n    CREATE_STREAM,\r\n    FETCH_STREAMS,\r\n    FETCH_STREAM,\r\n    DELETE_STREAM,\r\n    EDIT_STREAM\r\n} from './types';\r\n\r\nexport const signIn = (userId) => {\r\n    return {\r\n        type: SIGN_IN,\r\n        payload: userId\r\n    };\r\n};\r\n\r\nexport const signOut = () => {\r\n    return {\r\n        type: SIGN_OUT\r\n    };\r\n}\r\n\r\nexport const createStream = (fomValues) => async (dispatch, getState) => {\r\n    const { userId } = getState().auth;\r\n\r\n    const response = await streams.post('/streams', { ...fomValues, userId });\r\n\r\n    dispatch({ type: CREATE_STREAM, payload: response.data });\r\n    // programmatic navigation\r\n    createHashHistory.push('/');\r\n\r\n};\r\n\r\nexport const fetchStreams = () => async dispatch => {\r\n    const response = await streams.get('/streams');\r\n\r\n    dispatch({ type: FETCH_STREAMS, payload: response.data })\r\n};\r\n\r\nexport const fetchStream = (id) => async dispatch => {\r\n    const response = await streams.get(`/streams/${id}`);\r\n\r\n    dispatch({ type: FETCH_STREAM, payload: response.data });\r\n};\r\n\r\nexport const editStream = (id, formValues) => async dispatch => {\r\n    const response = await streams.patch(`/streams/${id}`, formValues);\r\n\r\n    dispatch({ type: EDIT_STREAM, payload: response.data });\r\n    createHashHistory.push('/');\r\n};\r\n\r\nexport const deleteStream = (id) => async dispatch => {\r\n    await streams.delete(`/streams/${id}`);\r\n\r\n    dispatch({ type: DELETE_STREAM, payload: id });\r\n    createHashHistory.push('/');\r\n};","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { signIn, signOut } from '../actions';\r\n\r\nclass GoogleAuth extends React.Component {\r\n    componentDidMount() {\r\n        window.gapi.load('client:auth2', () => {\r\n            window.gapi.client.init({\r\n                clientId: '330216459939-52dmqvvnscr98jqnt800hm55m9cuguul.apps.googleusercontent.com',\r\n                scope: 'email'\r\n            }).then(() => {\r\n                this.auth = window.gapi.auth2.getAuthInstance();\r\n\r\n                this.onAuthChange(this.auth.isSignedIn.get());\r\n                this.auth.isSignedIn.listen(this.onAuthChange);\r\n            });\r\n        });\r\n    };\r\n\r\n    onAuthChange = (isSignedIn) => {\r\n        if (isSignedIn) {\r\n            this.props.signIn(this.auth.currentUser.get().getId());\r\n        } else {\r\n            this.props.signOut();\r\n        };\r\n    };\r\n\r\n    onSignInClick = () => {\r\n        this.auth.signIn();\r\n    };\r\n\r\n    onSignOutClick = () => {\r\n        this.auth.signOut();\r\n    };\r\n \r\n    renderAuthButton() {\r\n        if (this.props.isSignedIn === null) {\r\n            return null;\r\n        } else if (this.props.isSignedIn) {\r\n            return (\r\n                <button onClick={this.onSignOutClick} className=\"ui red google button\">\r\n                    <i className=\"google icon\" />\r\n                    Sign Out\r\n                </button>\r\n            );\r\n        } else {\r\n            return (\r\n                <button onClick={this.onSignInClick} className=\"ui red google button\">\r\n                    <i className=\"google icon\" />\r\n                    Sign in with Gogole\r\n                </button>\r\n            );\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>{this.renderAuthButton()}</div>\r\n        );\r\n    };\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return { isSignedIn: state.auth.isSignedIn }\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    { signIn, signOut }\r\n)(GoogleAuth);","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport GoogleAuth from './GoogleAuth';\r\n\r\nconst Header = () => {\r\n    return (\r\n        <div className=\"ui secondary pointing menu\">\r\n            <Link to=\"/\" className=\"item\">\r\n                Streamy\r\n            </Link>\r\n            <div className=\"right menu\">\r\n                <Link to=\"/\" className=\"item\">\r\n                    All Streams\r\n                </Link>\r\n                <GoogleAuth />\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Header;","import React from 'react';\r\nimport { Field, reduxForm } from 'redux-form';\r\n\r\nclass StreamForm extends React.Component {\r\n\r\n    renderError({ error, touched }) {\r\n        if (touched && error) {\r\n            return (\r\n                <div className=\"ui error message\">\r\n                    <div className=\"header\">{error}</div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    renderInput = ({ input, label, meta }) => {\r\n        const className = `field ${meta.error && meta.touched ? 'error' : ''}`;\r\n        return (\r\n            <div className={className}>\r\n                <label>{label}</label>\r\n                <input {...input} autoComplete=\"off\" />\r\n                {this.renderError(meta)}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    onSubmit = (formValues) => {\r\n        this.props.onSubmit(formValues);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form onSubmit={this.props.handleSubmit(this.onSubmit)} className=\"ui form error\">\r\n                <Field name=\"title\" component={this.renderInput} label=\"Enter Title\" />\r\n                <Field name=\"description\" component={this.renderInput} label=\"Enter Description\" />\r\n                <button className=\"ui button primary\">Submit</button>\r\n            </form>\r\n        )\r\n    };\r\n};\r\n\r\nconst validate = (formValues) => {\r\n    const errors = {};\r\n\r\n    if (!formValues.title) {\r\n        errors.title = 'You must enter a title';\r\n    };\r\n\r\n    if (!formValues.description) {\r\n        errors.description = 'You must enter a description';\r\n    };\r\n\r\n    return errors;\r\n};\r\n\r\nexport default reduxForm({\r\n    form: 'streamForm',\r\n    validate: validate\r\n})(StreamForm);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { createStream } from '../../actions';\r\nimport StreamForm from './StreamForm';\r\n\r\nclass StreamCreate extends React.Component {\r\n    onSubmit = (formValues) => {\r\n        this.props.createStream(formValues);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h3>Create a Stream</h3>\r\n                <StreamForm onSubmit={this.onSubmit} />\r\n            </div>\r\n        );\r\n    };\r\n};\r\n\r\nexport default connect(\r\n    null,\r\n    { createStream }\r\n)(StreamCreate);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nconst Modal = (props) => {\r\n    return ReactDOM.createPortal(\r\n        <div onClick={props.onDismiss} className=\"ui dimmer modals visible active\">\r\n            <div onClick={(e) => e.stopPropagation()} className=\"ui standard modal visible active\">\r\n                <div className=\"header\">{props.title}</div>\r\n                <div className=\"content\">{props.content}</div>\r\n                <div className=\"actions\">{props.actions}</div>\r\n            </div>\r\n        </div>,\r\n        document.querySelector('#modal')\r\n    );\r\n};\r\n\r\nexport default Modal;","import React from 'react';\r\nimport Modal from '../Modal';\r\nimport createHashHistory from '../../history';\r\nimport { fetchStream, deleteStream } from '../../actions';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass StreamDelete extends React.Component {\r\n    componentDidMount() {\r\n        this.props.fetchStream(this.props.match.params.id)\r\n    };\r\n\r\n    renderActions() {\r\n        return (\r\n            <React.Fragment>\r\n                <button onClick={() => this.props.deleteStream(this.props.match.params.id)} className=\"ui button negative\">Delete</button>\r\n                <Link to=\"/\" className=\"ui button\">Cancel</Link>\r\n            </React.Fragment>\r\n        );\r\n    };\r\n\r\n    renderContent() {\r\n        if(!this.props.stream) {\r\n            return \"Are you sure you want to delete this stream?\"\r\n        }\r\n\r\n        return `Are you sure you want to delete stream: ${this.props.stream.title} `\r\n    }\r\n\r\n    render() {\r\n        return (\r\n                <Modal\r\n                    title=\"Delete Stream\"\r\n                    content={this.renderContent()}\r\n                    actions={this.renderActions()}\r\n                    onDismiss={() => createHashHistory.push('/')}\r\n                />\r\n        );\r\n    };\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return { stream: state.streams[ownProps.match.params.id] }\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    { fetchStream, deleteStream }\r\n)(StreamDelete);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport _ from 'lodash';\r\nimport { fetchStream, editStream } from '../../actions';\r\nimport StreamForm from './StreamForm';\r\n\r\nclass StreamEdit extends React.Component {\r\n    componentDidMount() {\r\n        this.props.fetchStream(this.props.match.params.id);\r\n    };\r\n\r\n    onSubmit = (formValues) => {\r\n        this.props.editStream(this.props.match.params.id, formValues);\r\n    };\r\n\r\n    render() {\r\n        if (!this.props.stream) {\r\n            return <div>Loading...</div>\r\n        }\r\n        return (\r\n            <div>\r\n                <h3>Edit a Stream</h3>\r\n                <StreamForm\r\n                    initialValues={_.pick(this.props.stream, 'title', 'description')}\r\n                    onSubmit={this.onSubmit} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return { stream: state.streams[ownProps.match.params.id] };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchStream, editStream })(StreamEdit);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { fetchStreams } from '../../actions';\r\n\r\nclass StreamList extends React.Component {\r\n\r\n    componentDidMount() {\r\n        this.props.fetchStreams();\r\n    }\r\n\r\n    renderAdmin(stream) {\r\n        if (stream.userId === this.props.currentUserId) {\r\n            return (\r\n                <div className=\"right floated content\">\r\n                    <Link\r\n                        to={`/streams/edit/${stream.id}`}\r\n                        className=\"ui button primary\"\r\n                    >\r\n                        Edit\r\n                    </Link>\r\n                    <Link\r\n                        to={`/streams/delete/${stream.id}`}\r\n                        className=\"ui button negative\"\r\n                    >\r\n                        Delete\r\n                    </Link>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    renderList() {\r\n        return this.props.streams.map(stream => {\r\n            return (\r\n                <div className=\"item\" key={stream.id}>\r\n                    {this.renderAdmin(stream)}\r\n                    <i className=\"large middle aligned icon camera\" />\r\n                    <div className=\"content\">\r\n                        <Link to={`/streams/${stream.id}`} className=\"header\">{stream.title}</Link>\r\n                        <div className=\"description\">{stream.description}</div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        })\r\n    }\r\n\r\n    renderCreate() {\r\n        if (this.props.isSignedIn) {\r\n            return (\r\n                <div style={{ textAlign: 'right' }}>\r\n                    <Link to=\"/streams/new\" className=\"ui button primary\">\r\n                        Create Stream\r\n                    </Link>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h2>Streams</h2>\r\n                <div className=\"ui celled list\">{this.renderList()}</div>\r\n                {this.renderCreate()}\r\n            </div>\r\n        )\r\n    }\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        streams: Object.values(state.streams),\r\n        currentUserId: state.auth.userId,\r\n        isSignedIn: state.auth.isSignedIn\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchStreams })(StreamList);","import React from 'react';\r\nimport flv from 'flv.js';\r\nimport { connect } from 'react-redux';\r\nimport { fetchStream } from '../../actions';\r\n\r\nclass StreamShow extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.videoRef = React.createRef();\r\n    };\r\n\r\n    componentDidMount() {\r\n        const { id } = this.props.match.params;\r\n        this.props.fetchStream(id);\r\n        this.buildPlayer();\r\n    };\r\n\r\n    componentDidUpdate() {\r\n        this.buildPlayer();\r\n    };\r\n\r\n    componentWillUnmount() {\r\n        this.player.destroy();\r\n    };\r\n\r\n    buildPlayer() {\r\n        if (this.player || !this.props.stream) {\r\n            return;\r\n        };\r\n        const { id } = this.props.match.params;\r\n\r\n        this.player = flv.createPlayer({\r\n            type: 'flv',\r\n            url: `http://localhost:8000/live/${id}.flv`\r\n        });\r\n\r\n        this.player.attachMediaElement(this.videoRef.current);\r\n        this.player.load();\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.stream) {\r\n            return <div>Loading...</div>\r\n        }\r\n\r\n        const { title, description } = this.props.stream;\r\n\r\n        return (\r\n            <div>\r\n                <video ref={this.videoRef} style={{ width: '100%' }} controls={true} />\r\n                <h1>{title}</h1>\r\n                <h5>{description}</h5>\r\n            </div>\r\n        )\r\n    };\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return { stream: state.streams[ownProps.match.params.id] }\r\n}\r\n\r\nexport default connect(mapStateToProps, { fetchStream })(StreamShow);","import React from 'react';\r\nimport { HashRouter, Route, Switch } from 'react-router-dom';\r\nimport Header from './Header';\r\nimport StreamCreate from './streams/StreamCreate';\r\nimport StreamDelete from './streams/StreamDelete';\r\nimport StreamEdit from './streams/StreamEdit';\r\nimport StreamList from './streams/StreamList';\r\nimport StreamShow from './streams/StreamShow';\r\nimport createHashHistory from '../history';\r\n\r\n\r\n\r\nconst App = () => {\r\n    return (\r\n        <div className=\"ui container\">\r\n            <HashRouter history={createHashHistory}>\r\n                <div>\r\n                    <Header />\r\n                    <Switch>\r\n                        <Route path=\"/\" exact component={StreamList}></Route>\r\n                        <Route path=\"/streams/new\" exact component={StreamCreate}></Route>\r\n                        <Route path=\"/streams/edit/:id\" exact component={StreamEdit}></Route>\r\n                        <Route path=\"/streams/delete/:id\" exact component={StreamDelete}></Route>\r\n                        <Route path=\"/streams/:id\" exact component={StreamShow}></Route>\r\n                    </Switch>\r\n                </div>\r\n            </HashRouter>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;","import { SIGN_IN, SIGN_OUT } from '../actions/types';\r\n\r\nconst INITIAL_STATE = {\r\n    isSignedIn: null,\r\n    userId: null\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n    switch (action.type) {\r\n        case SIGN_IN:\r\n            return { ...state, isSignedIn: true, userId: action.payload }\r\n        case SIGN_OUT:\r\n            return { ...state, isSignedIn: false, userId: null }\r\n        default:\r\n            return state;\r\n    }\r\n};","import { combineReducers } from 'redux';\r\nimport { reducer as formReducer } from 'redux-form';\r\nimport authReducer from './authReducer';\r\nimport streamReducer from './streamReducer';\r\n\r\n\r\nexport default combineReducers({\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    streams: streamReducer\r\n});","import _ from 'lodash'\r\nimport {\r\n    CREATE_STREAM,\r\n    FETCH_STREAMS,\r\n    FETCH_STREAM,\r\n    DELETE_STREAM,\r\n    EDIT_STREAM\r\n} from '../actions/types';\r\n\r\nexport default (state = {}, action) => {\r\n    switch (action.type) {\r\n        case FETCH_STREAMS:\r\n            return {...state, ..._.mapKeys(action.payload, 'id')}\r\n        case FETCH_STREAM:\r\n            return { ...state, [action.payload.id]: action.payload };\r\n        case CREATE_STREAM:\r\n            return { ...state, [action.payload.id]: action.payload };\r\n        case EDIT_STREAM:\r\n            return { ...state, [action.payload.id]: action.payload };\r\n        case DELETE_STREAM:\r\n            return _.omit(state, action.payload);\r\n        default:\r\n            return state;\r\n    }\r\n};","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware, compose } from 'redux';\r\nimport reduxThunk from 'redux-thunk';\r\n\r\nimport App from './components/App'\r\nimport reducers from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(\r\n    reducers,\r\n    composeEnhancers(applyMiddleware(reduxThunk))\r\n);\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider>,\r\n    document.querySelector('#root')\r\n);"],"sourceRoot":""}